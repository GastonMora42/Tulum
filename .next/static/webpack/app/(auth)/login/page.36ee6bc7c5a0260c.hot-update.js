"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/(auth)/login/page",{

/***/ "(app-pages-browser)/./src/server/services/auth/cognitoService.ts":
/*!****************************************************!*\
  !*** ./src/server/services/auth/cognitoService.ts ***!
  \****************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CognitoAuthService: () => (/* binding */ CognitoAuthService),\n/* harmony export */   cognitoService: () => (/* binding */ cognitoService)\n/* harmony export */ });\n/* harmony import */ var _aws_sdk_client_cognito_identity_provider__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @aws-sdk/client-cognito-identity-provider */ \"(app-pages-browser)/./node_modules/@aws-sdk/client-cognito-identity-provider/dist-es/commands/SignUpCommand.js\");\n/* harmony import */ var _aws_sdk_client_cognito_identity_provider__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @aws-sdk/client-cognito-identity-provider */ \"(app-pages-browser)/./node_modules/@aws-sdk/client-cognito-identity-provider/dist-es/commands/ConfirmSignUpCommand.js\");\n/* harmony import */ var _aws_sdk_client_cognito_identity_provider__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @aws-sdk/client-cognito-identity-provider */ \"(app-pages-browser)/./node_modules/@aws-sdk/client-cognito-identity-provider/dist-es/commands/ResendConfirmationCodeCommand.js\");\n/* harmony import */ var _aws_sdk_client_cognito_identity_provider__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @aws-sdk/client-cognito-identity-provider */ \"(app-pages-browser)/./node_modules/@aws-sdk/client-cognito-identity-provider/dist-es/commands/InitiateAuthCommand.js\");\n/* harmony import */ var _aws_sdk_client_cognito_identity_provider__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @aws-sdk/client-cognito-identity-provider */ \"(app-pages-browser)/./node_modules/@aws-sdk/client-cognito-identity-provider/dist-es/commands/GetUserCommand.js\");\n/* harmony import */ var _aws_sdk_client_cognito_identity_provider__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @aws-sdk/client-cognito-identity-provider */ \"(app-pages-browser)/./node_modules/@aws-sdk/client-cognito-identity-provider/dist-es/commands/GlobalSignOutCommand.js\");\n/* harmony import */ var _aws_sdk_client_cognito_identity_provider__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @aws-sdk/client-cognito-identity-provider */ \"(app-pages-browser)/./node_modules/@aws-sdk/client-cognito-identity-provider/dist-es/commands/AdminCreateUserCommand.js\");\n/* harmony import */ var _aws_sdk_client_cognito_identity_provider__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @aws-sdk/client-cognito-identity-provider */ \"(app-pages-browser)/./node_modules/@aws-sdk/client-cognito-identity-provider/dist-es/CognitoIdentityProviderClient.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! crypto */ \"(app-pages-browser)/./node_modules/next/dist/compiled/crypto-browserify/index.js\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_0__);\n/* provided dependency */ var process = __webpack_require__(/*! process */ \"(app-pages-browser)/../../../node_modules/process/browser.js\");\n// src/server/services/auth/cognitoService.ts\n\n\nclass CognitoAuthService {\n    // Método para calcular el SECRET_HASH\n    // En cognitoService.ts\n    calculateSecretHash(username) {\n        if (!this.clientSecret) {\n            console.error('Cliente secret no está configurado');\n            throw new Error('Client secret is not configured');\n        }\n        // El formato correcto es USERNAME + CLIENT_ID\n        const message = username + this.clientId;\n        const hmac = crypto__WEBPACK_IMPORTED_MODULE_0__.createHmac('sha256', this.clientSecret);\n        hmac.update(message);\n        return hmac.digest('base64');\n    }\n    // Registrar un nuevo usuario\n    async registerUser(params) {\n        try {\n            const { email, password, name } = params;\n            // Crear el usuario en Cognito\n            const signUpCommand = new _aws_sdk_client_cognito_identity_provider__WEBPACK_IMPORTED_MODULE_1__.SignUpCommand({\n                ClientId: this.clientId,\n                Username: email,\n                Password: password,\n                SecretHash: this.calculateSecretHash(email),\n                UserAttributes: [\n                    {\n                        Name: 'email',\n                        Value: email\n                    },\n                    {\n                        Name: 'name',\n                        Value: name\n                    }\n                ]\n            });\n            const response = await this.client.send(signUpCommand);\n            return {\n                success: true,\n                userId: response.UserSub,\n                message: 'Usuario registrado correctamente. Por favor, verifique su correo electrónico para completar el registro.'\n            };\n        } catch (error) {\n            console.error('Error al registrar usuario:', error);\n            // Manejar errores específicos\n            if (error.name === 'UsernameExistsException') {\n                return {\n                    success: false,\n                    message: 'El correo electrónico ya está registrado.'\n                };\n            }\n            if (error.name === 'InvalidPasswordException') {\n                return {\n                    success: false,\n                    message: 'La contraseña no cumple con los requisitos de seguridad.'\n                };\n            }\n            throw error;\n        }\n    }\n    // Confirmar el registro con el código de verificación\n    async confirmRegistration(email, confirmationCode) {\n        try {\n            const command = new _aws_sdk_client_cognito_identity_provider__WEBPACK_IMPORTED_MODULE_2__.ConfirmSignUpCommand({\n                ClientId: this.clientId,\n                Username: email,\n                ConfirmationCode: confirmationCode,\n                SecretHash: this.calculateSecretHash(email) // Añadir SECRET_HASH\n            });\n            await this.client.send(command);\n            return {\n                success: true,\n                message: 'Registro confirmado correctamente.'\n            };\n        } catch (error) {\n            console.error('Error al confirmar registro:', error);\n            if (error.name === 'CodeMismatchException') {\n                return {\n                    success: false,\n                    message: 'El código de verificación es incorrecto.'\n                };\n            }\n            if (error.name === 'ExpiredCodeException') {\n                return {\n                    success: false,\n                    message: 'El código de verificación ha expirado.'\n                };\n            }\n            return {\n                success: false,\n                message: 'Error al confirmar el registro. Por favor, intente nuevamente.'\n            };\n        }\n    }\n    // Reenviar código de confirmación\n    async resendConfirmationCode(email) {\n        try {\n            const command = new _aws_sdk_client_cognito_identity_provider__WEBPACK_IMPORTED_MODULE_3__.ResendConfirmationCodeCommand({\n                ClientId: this.clientId,\n                Username: email,\n                SecretHash: this.calculateSecretHash(email) // Añadir SECRET_HASH\n            });\n            await this.client.send(command);\n            return {\n                success: true,\n                message: 'Se ha enviado un nuevo código de verificación a su correo electrónico.'\n            };\n        } catch (error) {\n            console.error('Error al reenviar código:', error);\n            return {\n                success: false,\n                message: 'Error al reenviar el código de verificación. Por favor, intente nuevamente.'\n            };\n        }\n    }\n    // Login con Cognito\n    // En login de cognitoService.ts\n    async login(credentials) {\n        try {\n            var _this_userPoolId, _this_clientId;\n            const { email, password } = credentials;\n            console.log(\"1. Iniciando login con Cognito para:\", email);\n            // Verificar que tenemos los valores de configuración\n            console.log(\"2. Verificando configuración:\", {\n                region: process.env.AWS_REGION,\n                userPoolId: ((_this_userPoolId = this.userPoolId) === null || _this_userPoolId === void 0 ? void 0 : _this_userPoolId.substring(0, 5)) + '...',\n                clientId: ((_this_clientId = this.clientId) === null || _this_clientId === void 0 ? void 0 : _this_clientId.substring(0, 5)) + '...',\n                hasSecret: !!this.clientSecret\n            });\n            // Si usamos secreto, calcular SECRET_HASH\n            let secretHash;\n            if (this.clientSecret) {\n                try {\n                    secretHash = this.calculateSecretHash(email);\n                    console.log(\"3. SECRET_HASH calculado correctamente\");\n                } catch (error) {\n                    console.error(\"Error al calcular SECRET_HASH:\", error);\n                    throw error;\n                }\n            }\n            // Crear parámetros de autenticación\n            const authParams = {\n                USERNAME: email,\n                PASSWORD: password\n            };\n            // Añadir SECRET_HASH si existe\n            if (secretHash) {\n                authParams.SECRET_HASH = secretHash;\n            }\n            console.log(\"4. Parámetros de autenticación preparados\");\n            const command = new _aws_sdk_client_cognito_identity_provider__WEBPACK_IMPORTED_MODULE_4__.InitiateAuthCommand({\n                AuthFlow: \"USER_PASSWORD_AUTH\",\n                ClientId: this.clientId,\n                AuthParameters: authParams\n            });\n            console.log(\"5. Enviando solicitud a Cognito...\");\n            const response = await this.client.send(command);\n            console.log(\"6. Respuesta recibida de Cognito:\", (response === null || response === void 0 ? void 0 : response.AuthenticationResult) ? \"Con tokens\" : \"Sin tokens\", (response === null || response === void 0 ? void 0 : response.ChallengeName) ? \"Desaf\\xedo: \".concat(response.ChallengeName) : \"Sin desafío\");\n            if (!response.AuthenticationResult) {\n                if (response.ChallengeName) {\n                    throw new Error(\"Se requiere completar desaf\\xedo: \".concat(response.ChallengeName));\n                }\n                throw new Error('Error de autenticación: No se recibieron tokens de autenticación');\n            }\n            // Obtener información del usuario autenticado\n            console.log(\"7. Obteniendo información del usuario...\");\n            const userInfo = await this.getUserInfo(response.AuthenticationResult.AccessToken);\n            console.log(\"8. Información de usuario obtenida:\", userInfo.email);\n            return {\n                user: userInfo,\n                accessToken: response.AuthenticationResult.AccessToken,\n                refreshToken: response.AuthenticationResult.RefreshToken,\n                idToken: response.AuthenticationResult.IdToken,\n                expiresIn: response.AuthenticationResult.ExpiresIn || 3600\n            };\n        } catch (error) {\n            console.error('Error detallado en login Cognito:', error);\n            if (error.$metadata) {\n                console.error('Metadatos del error:', error.$metadata);\n            }\n            if (error.__type) {\n                console.error('Tipo de error AWS:', error.__type);\n            }\n            if (error.message) {\n                console.error('Mensaje de error:', error.message);\n            }\n            throw error;\n        }\n    }\n    // Obtener información del usuario desde Cognito\n    async getUserInfo(accessToken) {\n        try {\n            var _attributes_find, _attributes_find1, _attributes_find2;\n            const command = new _aws_sdk_client_cognito_identity_provider__WEBPACK_IMPORTED_MODULE_5__.GetUserCommand({\n                AccessToken: accessToken\n            });\n            const response = await this.client.send(command);\n            // Mapear atributos de Cognito a nuestro modelo de usuario\n            const attributes = response.UserAttributes || [];\n            const email = ((_attributes_find = attributes.find((attr)=>attr.Name === 'email')) === null || _attributes_find === void 0 ? void 0 : _attributes_find.Value) || '';\n            const name = ((_attributes_find1 = attributes.find((attr)=>attr.Name === 'name')) === null || _attributes_find1 === void 0 ? void 0 : _attributes_find1.Value) || '';\n            const sub = ((_attributes_find2 = attributes.find((attr)=>attr.Name === 'sub')) === null || _attributes_find2 === void 0 ? void 0 : _attributes_find2.Value) || '';\n            // Aquí deberíamos obtener el usuario de nuestra base de datos\n            // usando el sub como identificador externo\n            // Por ahora, devolvemos un usuario básico\n            return {\n                id: sub,\n                email,\n                name,\n                roleId: 'user',\n                createdAt: new Date(),\n                updatedAt: new Date(),\n                sucursalId: null\n            };\n        } catch (error) {\n            console.error('Error al obtener info de usuario:', error);\n            throw error;\n        }\n    }\n    // Cerrar sesión\n    async logout(accessToken) {\n        try {\n            const command = new _aws_sdk_client_cognito_identity_provider__WEBPACK_IMPORTED_MODULE_6__.GlobalSignOutCommand({\n                AccessToken: accessToken\n            });\n            await this.client.send(command);\n        } catch (error) {\n            console.error('Error al cerrar sesión:', error);\n            throw error;\n        }\n    }\n    async refreshToken(refreshToken, email) {\n        try {\n            // Si tenemos email, usarlo; de lo contrario, intentar extraerlo del token\n            let username = email || '';\n            // Si no tenemos username, no podemos generar SECRET_HASH\n            if (!username && this.clientSecret) {\n                throw new Error('Se requiere el email para el refresh token cuando se usa client secret');\n            }\n            // Parámetros para el refresh token\n            const authParams = {\n                REFRESH_TOKEN: refreshToken\n            };\n            // Añadir SECRET_HASH si tenemos username y clientSecret\n            if (username && this.clientSecret) {\n                authParams.SECRET_HASH = this.calculateSecretHash(username);\n            }\n            const command = new _aws_sdk_client_cognito_identity_provider__WEBPACK_IMPORTED_MODULE_4__.InitiateAuthCommand({\n                AuthFlow: \"REFRESH_TOKEN_AUTH\",\n                ClientId: this.clientId,\n                AuthParameters: authParams\n            });\n            const response = await this.client.send(command);\n            if (!response.AuthenticationResult) {\n                throw new Error('Error al refrescar token');\n            }\n            return {\n                accessToken: response.AuthenticationResult.AccessToken,\n                idToken: response.AuthenticationResult.IdToken,\n                refreshToken: refreshToken,\n                expiresIn: response.AuthenticationResult.ExpiresIn || 3600\n            };\n        } catch (error) {\n            console.error('Error al refrescar token:', error);\n            throw error;\n        }\n    }\n    // Crear usuario (solo admin)\n    async createUser(user) {\n        try {\n            const command = new _aws_sdk_client_cognito_identity_provider__WEBPACK_IMPORTED_MODULE_7__.AdminCreateUserCommand({\n                UserPoolId: this.userPoolId,\n                Username: user.email,\n                TemporaryPassword: user.password,\n                UserAttributes: [\n                    {\n                        Name: 'email',\n                        Value: user.email\n                    },\n                    {\n                        Name: 'email_verified',\n                        Value: 'true'\n                    },\n                    {\n                        Name: 'name',\n                        Value: user.name\n                    },\n                    {\n                        Name: 'custom:role',\n                        Value: user.roleId\n                    }\n                ]\n            });\n            await this.client.send(command);\n        // Aquí deberíamos crear también el usuario en nuestra BD\n        // y vincular el id de Cognito\n        } catch (error) {\n            console.error('Error al crear usuario:', error);\n            throw error;\n        }\n    }\n    constructor(){\n        this.client = new _aws_sdk_client_cognito_identity_provider__WEBPACK_IMPORTED_MODULE_8__.CognitoIdentityProviderClient({\n            region: process.env.AWS_REGION\n        });\n        this.userPoolId = process.env.COGNITO_USER_POOL_ID;\n        this.clientId = process.env.COGNITO_CLIENT_ID;\n        this.clientSecret = process.env.COGNITO_CLIENT_SECRET;\n    }\n}\n// Singleton para uso en la aplicación\nconst cognitoService = new CognitoAuthService();\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9zZXJ2ZXIvc2VydmljZXMvYXV0aC9jb2duaXRvU2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsNkNBQTZDO0FBWU07QUFFbEI7QUFzQjFCLE1BQU1TO0lBZ0JiLHNDQUFzQztJQUN0Qyx1QkFBdUI7SUFDZkMsb0JBQW9CQyxRQUFnQixFQUFVO1FBQ3BELElBQUksQ0FBQyxJQUFJLENBQUNDLFlBQVksRUFBRTtZQUN0QkMsUUFBUUMsS0FBSyxDQUFDO1lBQ2QsTUFBTSxJQUFJQyxNQUFNO1FBQ2xCO1FBRUEsOENBQThDO1FBQzlDLE1BQU1DLFVBQVVMLFdBQVcsSUFBSSxDQUFDTSxRQUFRO1FBQ3hDLE1BQU1DLE9BQU9WLDhDQUFpQixDQUFDLFVBQVUsSUFBSSxDQUFDSSxZQUFZO1FBQzFETSxLQUFLRSxNQUFNLENBQUNKO1FBQ1osT0FBT0UsS0FBS0csTUFBTSxDQUFDO0lBQ3JCO0lBRUEsNkJBQTZCO0lBQzdCLE1BQU1DLGFBQWFDLE1BQTBCLEVBQW9FO1FBQy9HLElBQUk7WUFDRixNQUFNLEVBQUVDLEtBQUssRUFBRUMsUUFBUSxFQUFFQyxJQUFJLEVBQUUsR0FBR0g7WUFFbEMsOEJBQThCO1lBQzlCLE1BQU1JLGdCQUFnQixJQUFJdEIsb0ZBQWFBLENBQUM7Z0JBQ3RDdUIsVUFBVSxJQUFJLENBQUNYLFFBQVE7Z0JBQ3ZCWSxVQUFVTDtnQkFDVk0sVUFBVUw7Z0JBQ1ZNLFlBQVksSUFBSSxDQUFDckIsbUJBQW1CLENBQUNjO2dCQUNyQ1EsZ0JBQWdCO29CQUNkO3dCQUNFQyxNQUFNO3dCQUNOQyxPQUFPVjtvQkFDVDtvQkFDQTt3QkFDRVMsTUFBTTt3QkFDTkMsT0FBT1I7b0JBQ1Q7aUJBQ0Q7WUFDSDtZQUVBLE1BQU1TLFdBQVcsTUFBTSxJQUFJLENBQUNDLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDVjtZQUV4QyxPQUFPO2dCQUNMVyxTQUFTO2dCQUNUQyxRQUFRSixTQUFTSyxPQUFPO2dCQUN4QnhCLFNBQVM7WUFDWDtRQUNGLEVBQUUsT0FBT0YsT0FBWTtZQUNuQkQsUUFBUUMsS0FBSyxDQUFDLCtCQUErQkE7WUFFN0MsOEJBQThCO1lBQzlCLElBQUlBLE1BQU1ZLElBQUksS0FBSywyQkFBMkI7Z0JBQzVDLE9BQU87b0JBQ0xZLFNBQVM7b0JBQ1R0QixTQUFTO2dCQUNYO1lBQ0Y7WUFFQSxJQUFJRixNQUFNWSxJQUFJLEtBQUssNEJBQTRCO2dCQUM3QyxPQUFPO29CQUNMWSxTQUFTO29CQUNUdEIsU0FBUztnQkFDWDtZQUNGO1lBRUEsTUFBTUY7UUFDUjtJQUNGO0lBRUEsc0RBQXNEO0lBQ3RELE1BQU0yQixvQkFBb0JqQixLQUFhLEVBQUVrQixnQkFBd0IsRUFBa0Q7UUFDakgsSUFBSTtZQUNGLE1BQU1DLFVBQVUsSUFBSXJDLDJGQUFvQkEsQ0FBQztnQkFDdkNzQixVQUFVLElBQUksQ0FBQ1gsUUFBUTtnQkFDdkJZLFVBQVVMO2dCQUNWb0Isa0JBQWtCRjtnQkFDbEJYLFlBQVksSUFBSSxDQUFDckIsbUJBQW1CLENBQUNjLE9BQU8scUJBQXFCO1lBQ25FO1lBRUEsTUFBTSxJQUFJLENBQUNZLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDTTtZQUV2QixPQUFPO2dCQUNMTCxTQUFTO2dCQUNUdEIsU0FBUztZQUNYO1FBQ0YsRUFBRSxPQUFPRixPQUFZO1lBQ25CRCxRQUFRQyxLQUFLLENBQUMsZ0NBQWdDQTtZQUU5QyxJQUFJQSxNQUFNWSxJQUFJLEtBQUsseUJBQXlCO2dCQUMxQyxPQUFPO29CQUNMWSxTQUFTO29CQUNUdEIsU0FBUztnQkFDWDtZQUNGO1lBRUEsSUFBSUYsTUFBTVksSUFBSSxLQUFLLHdCQUF3QjtnQkFDekMsT0FBTztvQkFDTFksU0FBUztvQkFDVHRCLFNBQVM7Z0JBQ1g7WUFDRjtZQUVBLE9BQU87Z0JBQ0xzQixTQUFTO2dCQUNUdEIsU0FBUztZQUNYO1FBQ0Y7SUFDRjtJQUVBLGtDQUFrQztJQUNsQyxNQUFNNkIsdUJBQXVCckIsS0FBYSxFQUFrRDtRQUMxRixJQUFJO1lBQ0YsTUFBTW1CLFVBQVUsSUFBSXBDLG9HQUE2QkEsQ0FBQztnQkFDaERxQixVQUFVLElBQUksQ0FBQ1gsUUFBUTtnQkFDdkJZLFVBQVVMO2dCQUNWTyxZQUFZLElBQUksQ0FBQ3JCLG1CQUFtQixDQUFDYyxPQUFPLHFCQUFxQjtZQUNuRTtZQUVBLE1BQU0sSUFBSSxDQUFDWSxNQUFNLENBQUNDLElBQUksQ0FBQ007WUFFdkIsT0FBTztnQkFDTEwsU0FBUztnQkFDVHRCLFNBQVM7WUFDWDtRQUNGLEVBQUUsT0FBT0YsT0FBTztZQUNkRCxRQUFRQyxLQUFLLENBQUMsNkJBQTZCQTtZQUUzQyxPQUFPO2dCQUNMd0IsU0FBUztnQkFDVHRCLFNBQVM7WUFDWDtRQUNGO0lBQ0Y7SUFFQSxvQkFBb0I7SUFDcEIsZ0NBQWdDO0lBQ2hDLE1BQU04QixNQUFNQyxXQUE2QixFQUF1QjtRQUM5RCxJQUFJO2dCQU9ZLGtCQUNGO1lBUFosTUFBTSxFQUFFdkIsS0FBSyxFQUFFQyxRQUFRLEVBQUUsR0FBR3NCO1lBQzVCbEMsUUFBUW1DLEdBQUcsQ0FBQyx3Q0FBd0N4QjtZQUVwRCxxREFBcUQ7WUFDckRYLFFBQVFtQyxHQUFHLENBQUMsaUNBQWlDO2dCQUMzQ0MsUUFBUUMsT0FBT0EsQ0FBQ0MsR0FBRyxDQUFDQyxVQUFVO2dCQUM5QkMsWUFBWSx5QkFBSSxDQUFDQSxVQUFVLGNBQWYsd0RBQWlCQyxTQUFTLENBQUMsR0FBRyxNQUFLO2dCQUMvQ3JDLFVBQVUsdUJBQUksQ0FBQ0EsUUFBUSxjQUFiLG9EQUFlcUMsU0FBUyxDQUFDLEdBQUcsTUFBSztnQkFDM0NDLFdBQVcsQ0FBQyxDQUFDLElBQUksQ0FBQzNDLFlBQVk7WUFDaEM7WUFFQSwwQ0FBMEM7WUFDMUMsSUFBSTRDO1lBQ0osSUFBSSxJQUFJLENBQUM1QyxZQUFZLEVBQUU7Z0JBQ3JCLElBQUk7b0JBQ0Y0QyxhQUFhLElBQUksQ0FBQzlDLG1CQUFtQixDQUFDYztvQkFDdENYLFFBQVFtQyxHQUFHLENBQUM7Z0JBQ2QsRUFBRSxPQUFPbEMsT0FBTztvQkFDZEQsUUFBUUMsS0FBSyxDQUFDLGtDQUFrQ0E7b0JBQ2hELE1BQU1BO2dCQUNSO1lBQ0Y7WUFFQSxvQ0FBb0M7WUFDcEMsTUFBTTJDLGFBQXFDO2dCQUN6Q0MsVUFBVWxDO2dCQUNWbUMsVUFBVWxDO1lBQ1o7WUFFQSwrQkFBK0I7WUFDL0IsSUFBSStCLFlBQVk7Z0JBQ2RDLFdBQVdHLFdBQVcsR0FBR0o7WUFDM0I7WUFFQTNDLFFBQVFtQyxHQUFHLENBQUM7WUFFWixNQUFNTCxVQUFVLElBQUkxQywwRkFBbUJBLENBQUM7Z0JBQ3RDNEQsVUFBVTtnQkFDVmpDLFVBQVUsSUFBSSxDQUFDWCxRQUFRO2dCQUN2QjZDLGdCQUFnQkw7WUFDbEI7WUFFQTVDLFFBQVFtQyxHQUFHLENBQUM7WUFDWixNQUFNYixXQUFXLE1BQU0sSUFBSSxDQUFDQyxNQUFNLENBQUNDLElBQUksQ0FBQ007WUFDeEM5QixRQUFRbUMsR0FBRyxDQUFDLHFDQUNWYixDQUFBQSxxQkFBQUEsK0JBQUFBLFNBQVU0QixvQkFBb0IsSUFBRyxlQUFlLGNBQ2hENUIsQ0FBQUEscUJBQUFBLCtCQUFBQSxTQUFVNkIsYUFBYSxJQUFHLGVBQW1DLE9BQXZCN0IsU0FBUzZCLGFBQWEsSUFBSztZQUduRSxJQUFJLENBQUM3QixTQUFTNEIsb0JBQW9CLEVBQUU7Z0JBQ2xDLElBQUk1QixTQUFTNkIsYUFBYSxFQUFFO29CQUMxQixNQUFNLElBQUlqRCxNQUFNLHFDQUF5RCxPQUF2Qm9CLFNBQVM2QixhQUFhO2dCQUMxRTtnQkFDQSxNQUFNLElBQUlqRCxNQUFNO1lBQ2xCO1lBRUEsOENBQThDO1lBQzlDRixRQUFRbUMsR0FBRyxDQUFDO1lBQ1osTUFBTWlCLFdBQVcsTUFBTSxJQUFJLENBQUNDLFdBQVcsQ0FBQy9CLFNBQVM0QixvQkFBb0IsQ0FBQ0ksV0FBVztZQUNqRnRELFFBQVFtQyxHQUFHLENBQUMsdUNBQXVDaUIsU0FBU3pDLEtBQUs7WUFFakUsT0FBTztnQkFDTDRDLE1BQU1IO2dCQUNOSSxhQUFhbEMsU0FBUzRCLG9CQUFvQixDQUFDSSxXQUFXO2dCQUN0REcsY0FBY25DLFNBQVM0QixvQkFBb0IsQ0FBQ1EsWUFBWTtnQkFDeERDLFNBQVNyQyxTQUFTNEIsb0JBQW9CLENBQUNVLE9BQU87Z0JBQzlDQyxXQUFXdkMsU0FBUzRCLG9CQUFvQixDQUFDWSxTQUFTLElBQUk7WUFDeEQ7UUFDRixFQUFFLE9BQU83RCxPQUFZO1lBQ25CRCxRQUFRQyxLQUFLLENBQUMscUNBQXFDQTtZQUNuRCxJQUFJQSxNQUFNOEQsU0FBUyxFQUFFO2dCQUNuQi9ELFFBQVFDLEtBQUssQ0FBQyx3QkFBd0JBLE1BQU04RCxTQUFTO1lBQ3ZEO1lBQ0EsSUFBSTlELE1BQU0rRCxNQUFNLEVBQUU7Z0JBQ2hCaEUsUUFBUUMsS0FBSyxDQUFDLHNCQUFzQkEsTUFBTStELE1BQU07WUFDbEQ7WUFDQSxJQUFJL0QsTUFBTUUsT0FBTyxFQUFFO2dCQUNqQkgsUUFBUUMsS0FBSyxDQUFDLHFCQUFxQkEsTUFBTUUsT0FBTztZQUNsRDtZQUNBLE1BQU1GO1FBQ1I7SUFDRjtJQUVBLGdEQUFnRDtJQUNoRCxNQUFjb0QsWUFBWUcsV0FBbUIsRUFBbUM7UUFDOUUsSUFBSTtnQkFTWVMsa0JBQ0RBLG1CQUNEQTtZQVZaLE1BQU1uQyxVQUFVLElBQUl6QyxxRkFBY0EsQ0FBQztnQkFDakNpRSxhQUFhRTtZQUNmO1lBRUEsTUFBTWxDLFdBQVcsTUFBTSxJQUFJLENBQUNDLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDTTtZQUV4QywwREFBMEQ7WUFDMUQsTUFBTW1DLGFBQWEzQyxTQUFTSCxjQUFjLElBQUksRUFBRTtZQUNoRCxNQUFNUixRQUFRc0QsRUFBQUEsbUJBQUFBLFdBQVdDLElBQUksQ0FBQ0MsQ0FBQUEsT0FBUUEsS0FBSy9DLElBQUksS0FBSyxzQkFBdEM2Qyx1Q0FBQUEsaUJBQWdENUMsS0FBSyxLQUFJO1lBQ3ZFLE1BQU1SLE9BQU9vRCxFQUFBQSxvQkFBQUEsV0FBV0MsSUFBSSxDQUFDQyxDQUFBQSxPQUFRQSxLQUFLL0MsSUFBSSxLQUFLLHFCQUF0QzZDLHdDQUFBQSxrQkFBK0M1QyxLQUFLLEtBQUk7WUFDckUsTUFBTStDLE1BQU1ILEVBQUFBLG9CQUFBQSxXQUFXQyxJQUFJLENBQUNDLENBQUFBLE9BQVFBLEtBQUsvQyxJQUFJLEtBQUssb0JBQXRDNkMsd0NBQUFBLGtCQUE4QzVDLEtBQUssS0FBSTtZQUVuRSw4REFBOEQ7WUFDOUQsMkNBQTJDO1lBQzNDLDBDQUEwQztZQUUxQyxPQUFPO2dCQUNMZ0QsSUFBSUQ7Z0JBQ0p6RDtnQkFDQUU7Z0JBQ0F5RCxRQUFRO2dCQUNSQyxXQUFXLElBQUlDO2dCQUNmQyxXQUFXLElBQUlEO2dCQUNmRSxZQUFZO1lBQ2Q7UUFDRixFQUFFLE9BQU96RSxPQUFPO1lBQ2RELFFBQVFDLEtBQUssQ0FBQyxxQ0FBcUNBO1lBQ25ELE1BQU1BO1FBQ1I7SUFDRjtJQUVBLGdCQUFnQjtJQUNoQixNQUFNMEUsT0FBT25CLFdBQW1CLEVBQWlCO1FBQy9DLElBQUk7WUFDRixNQUFNMUIsVUFBVSxJQUFJdkMsMkZBQW9CQSxDQUFDO2dCQUN2QytELGFBQWFFO1lBQ2Y7WUFFQSxNQUFNLElBQUksQ0FBQ2pDLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDTTtRQUN6QixFQUFFLE9BQU83QixPQUFPO1lBQ2RELFFBQVFDLEtBQUssQ0FBQywyQkFBMkJBO1lBQ3pDLE1BQU1BO1FBQ1I7SUFDRjtJQUVBLE1BQU13RCxhQUFhQSxZQUFvQixFQUFFOUMsS0FBYyxFQUFxQztRQUMxRixJQUFJO1lBQ0YsMEVBQTBFO1lBQzFFLElBQUliLFdBQVdhLFNBQVM7WUFFeEIseURBQXlEO1lBQ3pELElBQUksQ0FBQ2IsWUFBWSxJQUFJLENBQUNDLFlBQVksRUFBRTtnQkFDbEMsTUFBTSxJQUFJRyxNQUFNO1lBQ2xCO1lBRUEsbUNBQW1DO1lBQ25DLE1BQU0wQyxhQUFxQztnQkFDekNnQyxlQUFlbkI7WUFDakI7WUFFQSx3REFBd0Q7WUFDeEQsSUFBSTNELFlBQVksSUFBSSxDQUFDQyxZQUFZLEVBQUU7Z0JBQ2pDNkMsV0FBV0csV0FBVyxHQUFHLElBQUksQ0FBQ2xELG1CQUFtQixDQUFDQztZQUNwRDtZQUVBLE1BQU1nQyxVQUFVLElBQUkxQywwRkFBbUJBLENBQUM7Z0JBQ3RDNEQsVUFBVTtnQkFDVmpDLFVBQVUsSUFBSSxDQUFDWCxRQUFRO2dCQUN2QjZDLGdCQUFnQkw7WUFDbEI7WUFFQSxNQUFNdEIsV0FBVyxNQUFNLElBQUksQ0FBQ0MsTUFBTSxDQUFDQyxJQUFJLENBQUNNO1lBRXhDLElBQUksQ0FBQ1IsU0FBUzRCLG9CQUFvQixFQUFFO2dCQUNsQyxNQUFNLElBQUloRCxNQUFNO1lBQ2xCO1lBRUEsT0FBTztnQkFDTHNELGFBQWFsQyxTQUFTNEIsb0JBQW9CLENBQUNJLFdBQVc7Z0JBQ3RESyxTQUFTckMsU0FBUzRCLG9CQUFvQixDQUFDVSxPQUFPO2dCQUM5Q0gsY0FBY0E7Z0JBQ2RJLFdBQVd2QyxTQUFTNEIsb0JBQW9CLENBQUNZLFNBQVMsSUFBSTtZQUN4RDtRQUNGLEVBQUUsT0FBTzdELE9BQU87WUFDZEQsUUFBUUMsS0FBSyxDQUFDLDZCQUE2QkE7WUFDM0MsTUFBTUE7UUFDUjtJQUNGO0lBRUEsNkJBQTZCO0lBQzdCLE1BQU00RSxXQUFXdEIsSUFLaEIsRUFBaUI7UUFDaEIsSUFBSTtZQUNGLE1BQU16QixVQUFVLElBQUl4Qyw2RkFBc0JBLENBQUM7Z0JBQ3pDd0YsWUFBWSxJQUFJLENBQUN0QyxVQUFVO2dCQUMzQnhCLFVBQVV1QyxLQUFLNUMsS0FBSztnQkFDcEJvRSxtQkFBbUJ4QixLQUFLM0MsUUFBUTtnQkFDaENPLGdCQUFnQjtvQkFDZDt3QkFDRUMsTUFBTTt3QkFDTkMsT0FBT2tDLEtBQUs1QyxLQUFLO29CQUNuQjtvQkFDQTt3QkFDRVMsTUFBTTt3QkFDTkMsT0FBTztvQkFDVDtvQkFDQTt3QkFDRUQsTUFBTTt3QkFDTkMsT0FBT2tDLEtBQUsxQyxJQUFJO29CQUNsQjtvQkFDQTt3QkFDRU8sTUFBTTt3QkFDTkMsT0FBT2tDLEtBQUtlLE1BQU07b0JBQ3BCO2lCQUNEO1lBQ0g7WUFFQSxNQUFNLElBQUksQ0FBQy9DLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDTTtRQUV2Qix5REFBeUQ7UUFDekQsOEJBQThCO1FBQ2hDLEVBQUUsT0FBTzdCLE9BQU87WUFDZEQsUUFBUUMsS0FBSyxDQUFDLDJCQUEyQkE7WUFDekMsTUFBTUE7UUFDUjtJQUNGO0lBeldBK0UsYUFBYztRQUNaLElBQUksQ0FBQ3pELE1BQU0sR0FBRyxJQUFJcEMsb0dBQTZCQSxDQUFDO1lBQzlDaUQsUUFBUUMsT0FBT0EsQ0FBQ0MsR0FBRyxDQUFDQyxVQUFVO1FBQ2hDO1FBRUEsSUFBSSxDQUFDQyxVQUFVLEdBQUdILE9BQU9BLENBQUNDLEdBQUcsQ0FBQzJDLG9CQUFvQjtRQUNsRCxJQUFJLENBQUM3RSxRQUFRLEdBQUdpQyxPQUFPQSxDQUFDQyxHQUFHLENBQUM0QyxpQkFBaUI7UUFDN0MsSUFBSSxDQUFDbkYsWUFBWSxHQUFHc0MsT0FBT0EsQ0FBQ0MsR0FBRyxDQUFDNkMscUJBQXFCO0lBQ3ZEO0FBa1dBO0FBRUEsc0NBQXNDO0FBQy9CLE1BQU1DLGlCQUFpQixJQUFJeEYscUJBQXFCIiwic291cmNlcyI6WyIvVXNlcnMvZ2FzdG9ubW9yYS9EZXNrdG9wL1Byb3llY3Rvcy9UdWx1bS9zcmMvc2VydmVyL3NlcnZpY2VzL2F1dGgvY29nbml0b1NlcnZpY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL3NlcnZlci9zZXJ2aWNlcy9hdXRoL2NvZ25pdG9TZXJ2aWNlLnRzXG5pbXBvcnQgeyBcbiAgQ29nbml0b0lkZW50aXR5UHJvdmlkZXJDbGllbnQsIFxuICBJbml0aWF0ZUF1dGhDb21tYW5kLFxuICBSZXNwb25kVG9BdXRoQ2hhbGxlbmdlQ29tbWFuZCxcbiAgR2V0VXNlckNvbW1hbmQsXG4gIEFkbWluR2V0VXNlckNvbW1hbmQsXG4gIEFkbWluQ3JlYXRlVXNlckNvbW1hbmQsXG4gIEdsb2JhbFNpZ25PdXRDb21tYW5kLFxuICBTaWduVXBDb21tYW5kLFxuICBDb25maXJtU2lnblVwQ29tbWFuZCxcbiAgUmVzZW5kQ29uZmlybWF0aW9uQ29kZUNvbW1hbmRcbn0gZnJvbSBcIkBhd3Mtc2RrL2NsaWVudC1jb2duaXRvLWlkZW50aXR5LXByb3ZpZGVyXCI7XG5pbXBvcnQgeyB0eXBlIFVzZXIgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5pbXBvcnQgKiBhcyBjcnlwdG8gZnJvbSAnY3J5cHRvJztcblxuaW50ZXJmYWNlIFJlZ2lzdGVyVXNlclBhcmFtcyB7XG5lbWFpbDogc3RyaW5nO1xucGFzc3dvcmQ6IHN0cmluZztcbm5hbWU6IHN0cmluZztcbn1cblxuLy8gSW50ZXJmYWNlc1xuZXhwb3J0IGludGVyZmFjZSBMb2dpbkNyZWRlbnRpYWxzIHtcbiAgZW1haWw6IHN0cmluZztcbiAgcGFzc3dvcmQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdXRoUmVzdWx0IHtcbnVzZXI6IE9taXQ8VXNlciwgJ3Bhc3N3b3JkJz47XG5hY2Nlc3NUb2tlbjogc3RyaW5nO1xucmVmcmVzaFRva2VuOiBzdHJpbmc7XG5pZFRva2VuOiBzdHJpbmc7XG5leHBpcmVzSW46IG51bWJlcjtcbn1cblxuZXhwb3J0IGNsYXNzIENvZ25pdG9BdXRoU2VydmljZSB7XG5wcml2YXRlIGNsaWVudDogQ29nbml0b0lkZW50aXR5UHJvdmlkZXJDbGllbnQ7XG5wcml2YXRlIHVzZXJQb29sSWQ6IHN0cmluZztcbnByaXZhdGUgY2xpZW50SWQ6IHN0cmluZztcbnByaXZhdGUgY2xpZW50U2VjcmV0OiBzdHJpbmc7XG5cbmNvbnN0cnVjdG9yKCkge1xuICB0aGlzLmNsaWVudCA9IG5ldyBDb2duaXRvSWRlbnRpdHlQcm92aWRlckNsaWVudCh7XG4gICAgcmVnaW9uOiBwcm9jZXNzLmVudi5BV1NfUkVHSU9OIGFzIHN0cmluZ1xuICB9KTtcbiAgXG4gIHRoaXMudXNlclBvb2xJZCA9IHByb2Nlc3MuZW52LkNPR05JVE9fVVNFUl9QT09MX0lEIGFzIHN0cmluZztcbiAgdGhpcy5jbGllbnRJZCA9IHByb2Nlc3MuZW52LkNPR05JVE9fQ0xJRU5UX0lEIGFzIHN0cmluZztcbiAgdGhpcy5jbGllbnRTZWNyZXQgPSBwcm9jZXNzLmVudi5DT0dOSVRPX0NMSUVOVF9TRUNSRVQgYXMgc3RyaW5nO1xufVxuXG4vLyBNw6l0b2RvIHBhcmEgY2FsY3VsYXIgZWwgU0VDUkVUX0hBU0hcbi8vIEVuIGNvZ25pdG9TZXJ2aWNlLnRzXG5wcml2YXRlIGNhbGN1bGF0ZVNlY3JldEhhc2godXNlcm5hbWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGlmICghdGhpcy5jbGllbnRTZWNyZXQpIHtcbiAgICBjb25zb2xlLmVycm9yKCdDbGllbnRlIHNlY3JldCBubyBlc3TDoSBjb25maWd1cmFkbycpO1xuICAgIHRocm93IG5ldyBFcnJvcignQ2xpZW50IHNlY3JldCBpcyBub3QgY29uZmlndXJlZCcpO1xuICB9XG4gIFxuICAvLyBFbCBmb3JtYXRvIGNvcnJlY3RvIGVzIFVTRVJOQU1FICsgQ0xJRU5UX0lEXG4gIGNvbnN0IG1lc3NhZ2UgPSB1c2VybmFtZSArIHRoaXMuY2xpZW50SWQ7XG4gIGNvbnN0IGhtYWMgPSBjcnlwdG8uY3JlYXRlSG1hYygnc2hhMjU2JywgdGhpcy5jbGllbnRTZWNyZXQpO1xuICBobWFjLnVwZGF0ZShtZXNzYWdlKTtcbiAgcmV0dXJuIGhtYWMuZGlnZXN0KCdiYXNlNjQnKTtcbn1cblxuLy8gUmVnaXN0cmFyIHVuIG51ZXZvIHVzdWFyaW9cbmFzeW5jIHJlZ2lzdGVyVXNlcihwYXJhbXM6IFJlZ2lzdGVyVXNlclBhcmFtcyk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyB1c2VySWQ/OiBzdHJpbmc7IG1lc3NhZ2U/OiBzdHJpbmcgfT4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZW1haWwsIHBhc3N3b3JkLCBuYW1lIH0gPSBwYXJhbXM7XG4gICAgXG4gICAgLy8gQ3JlYXIgZWwgdXN1YXJpbyBlbiBDb2duaXRvXG4gICAgY29uc3Qgc2lnblVwQ29tbWFuZCA9IG5ldyBTaWduVXBDb21tYW5kKHtcbiAgICAgIENsaWVudElkOiB0aGlzLmNsaWVudElkLFxuICAgICAgVXNlcm5hbWU6IGVtYWlsLFxuICAgICAgUGFzc3dvcmQ6IHBhc3N3b3JkLFxuICAgICAgU2VjcmV0SGFzaDogdGhpcy5jYWxjdWxhdGVTZWNyZXRIYXNoKGVtYWlsKSwgLy8gQcOxYWRpciBTRUNSRVRfSEFTSFxuICAgICAgVXNlckF0dHJpYnV0ZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIE5hbWU6ICdlbWFpbCcsXG4gICAgICAgICAgVmFsdWU6IGVtYWlsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBOYW1lOiAnbmFtZScsXG4gICAgICAgICAgVmFsdWU6IG5hbWVcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pO1xuICAgIFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5jbGllbnQuc2VuZChzaWduVXBDb21tYW5kKTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHVzZXJJZDogcmVzcG9uc2UuVXNlclN1YixcbiAgICAgIG1lc3NhZ2U6ICdVc3VhcmlvIHJlZ2lzdHJhZG8gY29ycmVjdGFtZW50ZS4gUG9yIGZhdm9yLCB2ZXJpZmlxdWUgc3UgY29ycmVvIGVsZWN0csOzbmljbyBwYXJhIGNvbXBsZXRhciBlbCByZWdpc3Ryby4nXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIHJlZ2lzdHJhciB1c3VhcmlvOicsIGVycm9yKTtcbiAgICBcbiAgICAvLyBNYW5lamFyIGVycm9yZXMgZXNwZWPDrWZpY29zXG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdVc2VybmFtZUV4aXN0c0V4Y2VwdGlvbicpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRWwgY29ycmVvIGVsZWN0csOzbmljbyB5YSBlc3TDoSByZWdpc3RyYWRvLidcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIGlmIChlcnJvci5uYW1lID09PSAnSW52YWxpZFBhc3N3b3JkRXhjZXB0aW9uJykge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdMYSBjb250cmFzZcOxYSBubyBjdW1wbGUgY29uIGxvcyByZXF1aXNpdG9zIGRlIHNlZ3VyaWRhZC4nXG4gICAgICB9O1xuICAgIH1cbiAgICBcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vLyBDb25maXJtYXIgZWwgcmVnaXN0cm8gY29uIGVsIGPDs2RpZ28gZGUgdmVyaWZpY2FjacOzblxuYXN5bmMgY29uZmlybVJlZ2lzdHJhdGlvbihlbWFpbDogc3RyaW5nLCBjb25maXJtYXRpb25Db2RlOiBzdHJpbmcpOiBQcm9taXNlPHsgc3VjY2VzczogYm9vbGVhbjsgbWVzc2FnZTogc3RyaW5nIH0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBjb21tYW5kID0gbmV3IENvbmZpcm1TaWduVXBDb21tYW5kKHtcbiAgICAgIENsaWVudElkOiB0aGlzLmNsaWVudElkLFxuICAgICAgVXNlcm5hbWU6IGVtYWlsLFxuICAgICAgQ29uZmlybWF0aW9uQ29kZTogY29uZmlybWF0aW9uQ29kZSxcbiAgICAgIFNlY3JldEhhc2g6IHRoaXMuY2FsY3VsYXRlU2VjcmV0SGFzaChlbWFpbCkgLy8gQcOxYWRpciBTRUNSRVRfSEFTSFxuICAgIH0pO1xuICAgIFxuICAgIGF3YWl0IHRoaXMuY2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiAnUmVnaXN0cm8gY29uZmlybWFkbyBjb3JyZWN0YW1lbnRlLidcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgY29uZmlybWFyIHJlZ2lzdHJvOicsIGVycm9yKTtcbiAgICBcbiAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0NvZGVNaXNtYXRjaEV4Y2VwdGlvbicpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRWwgY8OzZGlnbyBkZSB2ZXJpZmljYWNpw7NuIGVzIGluY29ycmVjdG8uJ1xuICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgaWYgKGVycm9yLm5hbWUgPT09ICdFeHBpcmVkQ29kZUV4Y2VwdGlvbicpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRWwgY8OzZGlnbyBkZSB2ZXJpZmljYWNpw7NuIGhhIGV4cGlyYWRvLidcbiAgICAgIH07XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6ICdFcnJvciBhbCBjb25maXJtYXIgZWwgcmVnaXN0cm8uIFBvciBmYXZvciwgaW50ZW50ZSBudWV2YW1lbnRlLidcbiAgICB9O1xuICB9XG59XG5cbi8vIFJlZW52aWFyIGPDs2RpZ28gZGUgY29uZmlybWFjacOzblxuYXN5bmMgcmVzZW5kQ29uZmlybWF0aW9uQ29kZShlbWFpbDogc3RyaW5nKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluZyB9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY29tbWFuZCA9IG5ldyBSZXNlbmRDb25maXJtYXRpb25Db2RlQ29tbWFuZCh7XG4gICAgICBDbGllbnRJZDogdGhpcy5jbGllbnRJZCxcbiAgICAgIFVzZXJuYW1lOiBlbWFpbCxcbiAgICAgIFNlY3JldEhhc2g6IHRoaXMuY2FsY3VsYXRlU2VjcmV0SGFzaChlbWFpbCkgLy8gQcOxYWRpciBTRUNSRVRfSEFTSFxuICAgIH0pO1xuICAgIFxuICAgIGF3YWl0IHRoaXMuY2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiAnU2UgaGEgZW52aWFkbyB1biBudWV2byBjw7NkaWdvIGRlIHZlcmlmaWNhY2nDs24gYSBzdSBjb3JyZW8gZWxlY3Ryw7NuaWNvLidcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIHJlZW52aWFyIGPDs2RpZ286JywgZXJyb3IpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6ICdFcnJvciBhbCByZWVudmlhciBlbCBjw7NkaWdvIGRlIHZlcmlmaWNhY2nDs24uIFBvciBmYXZvciwgaW50ZW50ZSBudWV2YW1lbnRlLidcbiAgICB9O1xuICB9XG59XG5cbi8vIExvZ2luIGNvbiBDb2duaXRvXG4vLyBFbiBsb2dpbiBkZSBjb2duaXRvU2VydmljZS50c1xuYXN5bmMgbG9naW4oY3JlZGVudGlhbHM6IExvZ2luQ3JlZGVudGlhbHMpOiBQcm9taXNlPEF1dGhSZXN1bHQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGVtYWlsLCBwYXNzd29yZCB9ID0gY3JlZGVudGlhbHM7XG4gICAgY29uc29sZS5sb2coXCIxLiBJbmljaWFuZG8gbG9naW4gY29uIENvZ25pdG8gcGFyYTpcIiwgZW1haWwpO1xuICAgIFxuICAgIC8vIFZlcmlmaWNhciBxdWUgdGVuZW1vcyBsb3MgdmFsb3JlcyBkZSBjb25maWd1cmFjacOzblxuICAgIGNvbnNvbGUubG9nKFwiMi4gVmVyaWZpY2FuZG8gY29uZmlndXJhY2nDs246XCIsIHtcbiAgICAgIHJlZ2lvbjogcHJvY2Vzcy5lbnYuQVdTX1JFR0lPTixcbiAgICAgIHVzZXJQb29sSWQ6IHRoaXMudXNlclBvb2xJZD8uc3Vic3RyaW5nKDAsIDUpICsgJy4uLicsXG4gICAgICBjbGllbnRJZDogdGhpcy5jbGllbnRJZD8uc3Vic3RyaW5nKDAsIDUpICsgJy4uLicsXG4gICAgICBoYXNTZWNyZXQ6ICEhdGhpcy5jbGllbnRTZWNyZXRcbiAgICB9KTtcbiAgICBcbiAgICAvLyBTaSB1c2Ftb3Mgc2VjcmV0bywgY2FsY3VsYXIgU0VDUkVUX0hBU0hcbiAgICBsZXQgc2VjcmV0SGFzaDtcbiAgICBpZiAodGhpcy5jbGllbnRTZWNyZXQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHNlY3JldEhhc2ggPSB0aGlzLmNhbGN1bGF0ZVNlY3JldEhhc2goZW1haWwpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIjMuIFNFQ1JFVF9IQVNIIGNhbGN1bGFkbyBjb3JyZWN0YW1lbnRlXCIpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGFsIGNhbGN1bGFyIFNFQ1JFVF9IQVNIOlwiLCBlcnJvcik7XG4gICAgICAgIHRocm93IGVycm9yO1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBDcmVhciBwYXLDoW1ldHJvcyBkZSBhdXRlbnRpY2FjacOzblxuICAgIGNvbnN0IGF1dGhQYXJhbXM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICBVU0VSTkFNRTogZW1haWwsXG4gICAgICBQQVNTV09SRDogcGFzc3dvcmRcbiAgICB9O1xuICAgIFxuICAgIC8vIEHDsWFkaXIgU0VDUkVUX0hBU0ggc2kgZXhpc3RlXG4gICAgaWYgKHNlY3JldEhhc2gpIHtcbiAgICAgIGF1dGhQYXJhbXMuU0VDUkVUX0hBU0ggPSBzZWNyZXRIYXNoO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZyhcIjQuIFBhcsOhbWV0cm9zIGRlIGF1dGVudGljYWNpw7NuIHByZXBhcmFkb3NcIik7XG4gICAgXG4gICAgY29uc3QgY29tbWFuZCA9IG5ldyBJbml0aWF0ZUF1dGhDb21tYW5kKHtcbiAgICAgIEF1dGhGbG93OiBcIlVTRVJfUEFTU1dPUkRfQVVUSFwiLFxuICAgICAgQ2xpZW50SWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICBBdXRoUGFyYW1ldGVyczogYXV0aFBhcmFtc1xuICAgIH0pO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKFwiNS4gRW52aWFuZG8gc29saWNpdHVkIGEgQ29nbml0by4uLlwiKTtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgY29uc29sZS5sb2coXCI2LiBSZXNwdWVzdGEgcmVjaWJpZGEgZGUgQ29nbml0bzpcIiwgXG4gICAgICByZXNwb25zZT8uQXV0aGVudGljYXRpb25SZXN1bHQgPyBcIkNvbiB0b2tlbnNcIiA6IFwiU2luIHRva2Vuc1wiLFxuICAgICAgcmVzcG9uc2U/LkNoYWxsZW5nZU5hbWUgPyBgRGVzYWbDrW86ICR7cmVzcG9uc2UuQ2hhbGxlbmdlTmFtZX1gIDogXCJTaW4gZGVzYWbDrW9cIlxuICAgICk7XG4gICAgXG4gICAgaWYgKCFyZXNwb25zZS5BdXRoZW50aWNhdGlvblJlc3VsdCkge1xuICAgICAgaWYgKHJlc3BvbnNlLkNoYWxsZW5nZU5hbWUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBTZSByZXF1aWVyZSBjb21wbGV0YXIgZGVzYWbDrW86ICR7cmVzcG9uc2UuQ2hhbGxlbmdlTmFtZX1gKTtcbiAgICAgIH1cbiAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgZGUgYXV0ZW50aWNhY2nDs246IE5vIHNlIHJlY2liaWVyb24gdG9rZW5zIGRlIGF1dGVudGljYWNpw7NuJyk7XG4gICAgfVxuICAgIFxuICAgIC8vIE9idGVuZXIgaW5mb3JtYWNpw7NuIGRlbCB1c3VhcmlvIGF1dGVudGljYWRvXG4gICAgY29uc29sZS5sb2coXCI3LiBPYnRlbmllbmRvIGluZm9ybWFjacOzbiBkZWwgdXN1YXJpby4uLlwiKTtcbiAgICBjb25zdCB1c2VySW5mbyA9IGF3YWl0IHRoaXMuZ2V0VXNlckluZm8ocmVzcG9uc2UuQXV0aGVudGljYXRpb25SZXN1bHQuQWNjZXNzVG9rZW4gYXMgc3RyaW5nKTtcbiAgICBjb25zb2xlLmxvZyhcIjguIEluZm9ybWFjacOzbiBkZSB1c3VhcmlvIG9idGVuaWRhOlwiLCB1c2VySW5mby5lbWFpbCk7XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHVzZXI6IHVzZXJJbmZvLFxuICAgICAgYWNjZXNzVG9rZW46IHJlc3BvbnNlLkF1dGhlbnRpY2F0aW9uUmVzdWx0LkFjY2Vzc1Rva2VuIGFzIHN0cmluZyxcbiAgICAgIHJlZnJlc2hUb2tlbjogcmVzcG9uc2UuQXV0aGVudGljYXRpb25SZXN1bHQuUmVmcmVzaFRva2VuIGFzIHN0cmluZyxcbiAgICAgIGlkVG9rZW46IHJlc3BvbnNlLkF1dGhlbnRpY2F0aW9uUmVzdWx0LklkVG9rZW4gYXMgc3RyaW5nLFxuICAgICAgZXhwaXJlc0luOiByZXNwb25zZS5BdXRoZW50aWNhdGlvblJlc3VsdC5FeHBpcmVzSW4gfHwgMzYwMFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBkZXRhbGxhZG8gZW4gbG9naW4gQ29nbml0bzonLCBlcnJvcik7XG4gICAgaWYgKGVycm9yLiRtZXRhZGF0YSkge1xuICAgICAgY29uc29sZS5lcnJvcignTWV0YWRhdG9zIGRlbCBlcnJvcjonLCBlcnJvci4kbWV0YWRhdGEpO1xuICAgIH1cbiAgICBpZiAoZXJyb3IuX190eXBlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdUaXBvIGRlIGVycm9yIEFXUzonLCBlcnJvci5fX3R5cGUpO1xuICAgIH1cbiAgICBpZiAoZXJyb3IubWVzc2FnZSkge1xuICAgICAgY29uc29sZS5lcnJvcignTWVuc2FqZSBkZSBlcnJvcjonLCBlcnJvci5tZXNzYWdlKTtcbiAgICB9XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gT2J0ZW5lciBpbmZvcm1hY2nDs24gZGVsIHVzdWFyaW8gZGVzZGUgQ29nbml0b1xucHJpdmF0ZSBhc3luYyBnZXRVc2VySW5mbyhhY2Nlc3NUb2tlbjogc3RyaW5nKTogUHJvbWlzZTxPbWl0PFVzZXIsICdwYXNzd29yZCc+PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY29tbWFuZCA9IG5ldyBHZXRVc2VyQ29tbWFuZCh7XG4gICAgICBBY2Nlc3NUb2tlbjogYWNjZXNzVG9rZW5cbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuY2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgXG4gICAgLy8gTWFwZWFyIGF0cmlidXRvcyBkZSBDb2duaXRvIGEgbnVlc3RybyBtb2RlbG8gZGUgdXN1YXJpb1xuICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSByZXNwb25zZS5Vc2VyQXR0cmlidXRlcyB8fCBbXTtcbiAgICBjb25zdCBlbWFpbCA9IGF0dHJpYnV0ZXMuZmluZChhdHRyID0+IGF0dHIuTmFtZSA9PT0gJ2VtYWlsJyk/LlZhbHVlIHx8ICcnO1xuICAgIGNvbnN0IG5hbWUgPSBhdHRyaWJ1dGVzLmZpbmQoYXR0ciA9PiBhdHRyLk5hbWUgPT09ICduYW1lJyk/LlZhbHVlIHx8ICcnO1xuICAgIGNvbnN0IHN1YiA9IGF0dHJpYnV0ZXMuZmluZChhdHRyID0+IGF0dHIuTmFtZSA9PT0gJ3N1YicpPy5WYWx1ZSB8fCAnJztcbiAgICBcbiAgICAvLyBBcXXDrSBkZWJlcsOtYW1vcyBvYnRlbmVyIGVsIHVzdWFyaW8gZGUgbnVlc3RyYSBiYXNlIGRlIGRhdG9zXG4gICAgLy8gdXNhbmRvIGVsIHN1YiBjb21vIGlkZW50aWZpY2Fkb3IgZXh0ZXJub1xuICAgIC8vIFBvciBhaG9yYSwgZGV2b2x2ZW1vcyB1biB1c3VhcmlvIGLDoXNpY29cbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHN1YixcbiAgICAgIGVtYWlsLFxuICAgICAgbmFtZSxcbiAgICAgIHJvbGVJZDogJ3VzZXInLCAvLyBQb3IgZGVmZWN0bywgbHVlZ28gYWN0dWFsaXphbW9zIGNvbiBpbmZvIGRlIEJEXG4gICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICBzdWN1cnNhbElkOiBudWxsXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBhbCBvYnRlbmVyIGluZm8gZGUgdXN1YXJpbzonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLy8gQ2VycmFyIHNlc2nDs25cbmFzeW5jIGxvZ291dChhY2Nlc3NUb2tlbjogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY29tbWFuZCA9IG5ldyBHbG9iYWxTaWduT3V0Q29tbWFuZCh7XG4gICAgICBBY2Nlc3NUb2tlbjogYWNjZXNzVG9rZW5cbiAgICB9KTtcbiAgICBcbiAgICBhd2FpdCB0aGlzLmNsaWVudC5zZW5kKGNvbW1hbmQpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGNlcnJhciBzZXNpw7NuOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG5hc3luYyByZWZyZXNoVG9rZW4ocmVmcmVzaFRva2VuOiBzdHJpbmcsIGVtYWlsPzogc3RyaW5nKTogUHJvbWlzZTxPbWl0PEF1dGhSZXN1bHQsICd1c2VyJz4+IHtcbiAgdHJ5IHtcbiAgICAvLyBTaSB0ZW5lbW9zIGVtYWlsLCB1c2FybG87IGRlIGxvIGNvbnRyYXJpbywgaW50ZW50YXIgZXh0cmFlcmxvIGRlbCB0b2tlblxuICAgIGxldCB1c2VybmFtZSA9IGVtYWlsIHx8ICcnO1xuICAgIFxuICAgIC8vIFNpIG5vIHRlbmVtb3MgdXNlcm5hbWUsIG5vIHBvZGVtb3MgZ2VuZXJhciBTRUNSRVRfSEFTSFxuICAgIGlmICghdXNlcm5hbWUgJiYgdGhpcy5jbGllbnRTZWNyZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignU2UgcmVxdWllcmUgZWwgZW1haWwgcGFyYSBlbCByZWZyZXNoIHRva2VuIGN1YW5kbyBzZSB1c2EgY2xpZW50IHNlY3JldCcpO1xuICAgIH1cbiAgICBcbiAgICAvLyBQYXLDoW1ldHJvcyBwYXJhIGVsIHJlZnJlc2ggdG9rZW5cbiAgICBjb25zdCBhdXRoUGFyYW1zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgUkVGUkVTSF9UT0tFTjogcmVmcmVzaFRva2VuXG4gICAgfTtcbiAgICBcbiAgICAvLyBBw7FhZGlyIFNFQ1JFVF9IQVNIIHNpIHRlbmVtb3MgdXNlcm5hbWUgeSBjbGllbnRTZWNyZXRcbiAgICBpZiAodXNlcm5hbWUgJiYgdGhpcy5jbGllbnRTZWNyZXQpIHtcbiAgICAgIGF1dGhQYXJhbXMuU0VDUkVUX0hBU0ggPSB0aGlzLmNhbGN1bGF0ZVNlY3JldEhhc2godXNlcm5hbWUpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBjb21tYW5kID0gbmV3IEluaXRpYXRlQXV0aENvbW1hbmQoe1xuICAgICAgQXV0aEZsb3c6IFwiUkVGUkVTSF9UT0tFTl9BVVRIXCIsXG4gICAgICBDbGllbnRJZDogdGhpcy5jbGllbnRJZCxcbiAgICAgIEF1dGhQYXJhbWV0ZXJzOiBhdXRoUGFyYW1zXG4gICAgfSk7XG4gICAgXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmNsaWVudC5zZW5kKGNvbW1hbmQpO1xuICAgIFxuICAgIGlmICghcmVzcG9uc2UuQXV0aGVudGljYXRpb25SZXN1bHQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3IgYWwgcmVmcmVzY2FyIHRva2VuJyk7XG4gICAgfVxuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBhY2Nlc3NUb2tlbjogcmVzcG9uc2UuQXV0aGVudGljYXRpb25SZXN1bHQuQWNjZXNzVG9rZW4gYXMgc3RyaW5nLFxuICAgICAgaWRUb2tlbjogcmVzcG9uc2UuQXV0aGVudGljYXRpb25SZXN1bHQuSWRUb2tlbiBhcyBzdHJpbmcsXG4gICAgICByZWZyZXNoVG9rZW46IHJlZnJlc2hUb2tlbiwgLy8gTWFudGVuZXIgZWwgbWlzbW8gcmVmcmVzaCB0b2tlblxuICAgICAgZXhwaXJlc0luOiByZXNwb25zZS5BdXRoZW50aWNhdGlvblJlc3VsdC5FeHBpcmVzSW4gfHwgMzYwMFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgcmVmcmVzY2FyIHRva2VuOicsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vLyBDcmVhciB1c3VhcmlvIChzb2xvIGFkbWluKVxuYXN5bmMgY3JlYXRlVXNlcih1c2VyOiB7XG4gIGVtYWlsOiBzdHJpbmc7XG4gIG5hbWU6IHN0cmluZztcbiAgcGFzc3dvcmQ6IHN0cmluZztcbiAgcm9sZUlkOiBzdHJpbmc7XG59KTogUHJvbWlzZTx2b2lkPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgY29tbWFuZCA9IG5ldyBBZG1pbkNyZWF0ZVVzZXJDb21tYW5kKHtcbiAgICAgIFVzZXJQb29sSWQ6IHRoaXMudXNlclBvb2xJZCxcbiAgICAgIFVzZXJuYW1lOiB1c2VyLmVtYWlsLFxuICAgICAgVGVtcG9yYXJ5UGFzc3dvcmQ6IHVzZXIucGFzc3dvcmQsXG4gICAgICBVc2VyQXR0cmlidXRlczogW1xuICAgICAgICB7XG4gICAgICAgICAgTmFtZTogJ2VtYWlsJyxcbiAgICAgICAgICBWYWx1ZTogdXNlci5lbWFpbFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgTmFtZTogJ2VtYWlsX3ZlcmlmaWVkJyxcbiAgICAgICAgICBWYWx1ZTogJ3RydWUnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBOYW1lOiAnbmFtZScsXG4gICAgICAgICAgVmFsdWU6IHVzZXIubmFtZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgTmFtZTogJ2N1c3RvbTpyb2xlJyxcbiAgICAgICAgICBWYWx1ZTogdXNlci5yb2xlSWRcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pO1xuICAgIFxuICAgIGF3YWl0IHRoaXMuY2xpZW50LnNlbmQoY29tbWFuZCk7XG4gICAgXG4gICAgLy8gQXF1w60gZGViZXLDrWFtb3MgY3JlYXIgdGFtYmnDqW4gZWwgdXN1YXJpbyBlbiBudWVzdHJhIEJEXG4gICAgLy8geSB2aW5jdWxhciBlbCBpZCBkZSBDb2duaXRvXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgY3JlYXIgdXN1YXJpbzonLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cbn1cblxuLy8gU2luZ2xldG9uIHBhcmEgdXNvIGVuIGxhIGFwbGljYWNpw7NuXG5leHBvcnQgY29uc3QgY29nbml0b1NlcnZpY2UgPSBuZXcgQ29nbml0b0F1dGhTZXJ2aWNlKCk7Il0sIm5hbWVzIjpbIkNvZ25pdG9JZGVudGl0eVByb3ZpZGVyQ2xpZW50IiwiSW5pdGlhdGVBdXRoQ29tbWFuZCIsIkdldFVzZXJDb21tYW5kIiwiQWRtaW5DcmVhdGVVc2VyQ29tbWFuZCIsIkdsb2JhbFNpZ25PdXRDb21tYW5kIiwiU2lnblVwQ29tbWFuZCIsIkNvbmZpcm1TaWduVXBDb21tYW5kIiwiUmVzZW5kQ29uZmlybWF0aW9uQ29kZUNvbW1hbmQiLCJjcnlwdG8iLCJDb2duaXRvQXV0aFNlcnZpY2UiLCJjYWxjdWxhdGVTZWNyZXRIYXNoIiwidXNlcm5hbWUiLCJjbGllbnRTZWNyZXQiLCJjb25zb2xlIiwiZXJyb3IiLCJFcnJvciIsIm1lc3NhZ2UiLCJjbGllbnRJZCIsImhtYWMiLCJjcmVhdGVIbWFjIiwidXBkYXRlIiwiZGlnZXN0IiwicmVnaXN0ZXJVc2VyIiwicGFyYW1zIiwiZW1haWwiLCJwYXNzd29yZCIsIm5hbWUiLCJzaWduVXBDb21tYW5kIiwiQ2xpZW50SWQiLCJVc2VybmFtZSIsIlBhc3N3b3JkIiwiU2VjcmV0SGFzaCIsIlVzZXJBdHRyaWJ1dGVzIiwiTmFtZSIsIlZhbHVlIiwicmVzcG9uc2UiLCJjbGllbnQiLCJzZW5kIiwic3VjY2VzcyIsInVzZXJJZCIsIlVzZXJTdWIiLCJjb25maXJtUmVnaXN0cmF0aW9uIiwiY29uZmlybWF0aW9uQ29kZSIsImNvbW1hbmQiLCJDb25maXJtYXRpb25Db2RlIiwicmVzZW5kQ29uZmlybWF0aW9uQ29kZSIsImxvZ2luIiwiY3JlZGVudGlhbHMiLCJsb2ciLCJyZWdpb24iLCJwcm9jZXNzIiwiZW52IiwiQVdTX1JFR0lPTiIsInVzZXJQb29sSWQiLCJzdWJzdHJpbmciLCJoYXNTZWNyZXQiLCJzZWNyZXRIYXNoIiwiYXV0aFBhcmFtcyIsIlVTRVJOQU1FIiwiUEFTU1dPUkQiLCJTRUNSRVRfSEFTSCIsIkF1dGhGbG93IiwiQXV0aFBhcmFtZXRlcnMiLCJBdXRoZW50aWNhdGlvblJlc3VsdCIsIkNoYWxsZW5nZU5hbWUiLCJ1c2VySW5mbyIsImdldFVzZXJJbmZvIiwiQWNjZXNzVG9rZW4iLCJ1c2VyIiwiYWNjZXNzVG9rZW4iLCJyZWZyZXNoVG9rZW4iLCJSZWZyZXNoVG9rZW4iLCJpZFRva2VuIiwiSWRUb2tlbiIsImV4cGlyZXNJbiIsIkV4cGlyZXNJbiIsIiRtZXRhZGF0YSIsIl9fdHlwZSIsImF0dHJpYnV0ZXMiLCJmaW5kIiwiYXR0ciIsInN1YiIsImlkIiwicm9sZUlkIiwiY3JlYXRlZEF0IiwiRGF0ZSIsInVwZGF0ZWRBdCIsInN1Y3Vyc2FsSWQiLCJsb2dvdXQiLCJSRUZSRVNIX1RPS0VOIiwiY3JlYXRlVXNlciIsIlVzZXJQb29sSWQiLCJUZW1wb3JhcnlQYXNzd29yZCIsImNvbnN0cnVjdG9yIiwiQ09HTklUT19VU0VSX1BPT0xfSUQiLCJDT0dOSVRPX0NMSUVOVF9JRCIsIkNPR05JVE9fQ0xJRU5UX1NFQ1JFVCIsImNvZ25pdG9TZXJ2aWNlIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/server/services/auth/cognitoService.ts\n"));

/***/ })

});