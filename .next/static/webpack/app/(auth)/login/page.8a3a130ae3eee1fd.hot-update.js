"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/(auth)/login/page",{

/***/ "(app-pages-browser)/./src/server/services/auth/authService.ts":
/*!*************************************************!*\
  !*** ./src/server/services/auth/authService.ts ***!
  \*************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthService: () => (/* binding */ AuthService),\n/* harmony export */   authService: () => (/* binding */ authService),\n/* harmony export */   refreshToken: () => (/* binding */ refreshToken)\n/* harmony export */ });\n/* harmony import */ var _server_db_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/server/db/client */ \"(app-pages-browser)/./src/server/db/client.ts\");\n/* harmony import */ var _cognitoService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./cognitoService */ \"(app-pages-browser)/./src/server/services/auth/cognitoService.ts\");\n// src/server/services/auth/authService.ts\n\n\n// Servicio de autenticación que actúa como fachada para Cognito\nclass AuthService {\n    // Login\n    async login(credentials) {\n        try {\n            // Autenticar con Cognito\n            const cognitoResult = await _cognitoService__WEBPACK_IMPORTED_MODULE_1__.cognitoService.login(credentials);\n            // Buscar usuario en nuestra BD\n            let user = await _server_db_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].user.findFirst({\n                where: {\n                    email: credentials.email\n                },\n                include: {\n                    role: true\n                }\n            });\n            console.log('Usuario encontrado:', user);\n            console.log('Rol del usuario:', user === null || user === void 0 ? void 0 : user.role);\n            // Si no existe el usuario, lo creamos\n            if (!user) {\n                console.log(\"Usuario no encontrado en BD local, creando...\");\n                // Buscar primero un rol (preferiblemente admin)\n                let role = await _server_db_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].role.findFirst({\n                    where: {\n                        name: 'admin'\n                    }\n                });\n                // Si no existe ningún rol, necesitamos crear al menos uno\n                if (!role) {\n                    console.log(\"Creando rol 'admin' porque no existe\");\n                    role = await _server_db_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].role.create({\n                        data: {\n                            name: 'admin',\n                            permissions: [\n                                '*'\n                            ] // Todos los permisos como JSON\n                        }\n                    });\n                }\n                // Crear el usuario con el rol encontrado o creado\n                user = await _server_db_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].user.create({\n                    data: {\n                        id: cognitoResult.user.id,\n                        email: credentials.email,\n                        name: cognitoResult.user.name || credentials.email.split('@')[0],\n                        roleId: role.id\n                    },\n                    include: {\n                        role: true\n                    }\n                });\n                console.log(\"Usuario creado exitosamente:\", user.id);\n            }\n            // Devolvemos el resultado combinado\n            return {\n                ...cognitoResult,\n                user: {\n                    ...user,\n                    // Asegurarse de que usamos los datos de nuestra BD\n                    id: user.id,\n                    roleId: user.roleId\n                }\n            };\n        } catch (error) {\n            console.error('Error en login:', error);\n            throw error; // Propagar el error para que el cliente pueda manejarlo\n        }\n    }\n    // Cerrar sesión\n    async logout(accessToken) {\n        try {\n            await _cognitoService__WEBPACK_IMPORTED_MODULE_1__.cognitoService.logout(accessToken);\n            return true;\n        } catch (error) {\n            console.error('Error en logout:', error);\n            return false;\n        }\n    }\n    // Refrescar token\n    async refreshUserToken(refreshToken) {\n        try {\n            // Usar el email almacenado en localStorage para el SECRET_HASH\n            let email = '';\n            if (typeof localStorage !== 'undefined') {\n                email = localStorage.getItem('userEmail') || '';\n            }\n            return await _cognitoService__WEBPACK_IMPORTED_MODULE_1__.cognitoService.refreshToken(refreshToken, email);\n        } catch (error) {\n            console.error('Error al refrescar token:', error);\n            return null;\n        }\n    }\n    // Obtener usuario por ID\n    async getUserById(userId) {\n        try {\n            const user = await _server_db_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].user.findUnique({\n                where: {\n                    id: userId\n                },\n                include: {\n                    role: true\n                }\n            });\n            if (!user) return null;\n            return user;\n        } catch (error) {\n            console.error('Error al obtener usuario:', error);\n            return null;\n        }\n    }\n    // Crear usuario (admin)\n    async createUser(userData) {\n        try {\n            // Verificar que el rol existe\n            const roleExists = await _server_db_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].role.findUnique({\n                where: {\n                    id: userData.roleId\n                }\n            });\n            if (!roleExists) {\n                throw new Error(\"El rol con ID \".concat(userData.roleId, \" no existe\"));\n            }\n            // Si se proporciona sucursalId, verificar que existe\n            if (userData.sucursalId) {\n                const sucursalExists = await _server_db_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].ubicacion.findUnique({\n                    where: {\n                        id: userData.sucursalId\n                    }\n                });\n                if (!sucursalExists) {\n                    throw new Error(\"La ubicaci\\xf3n con ID \".concat(userData.sucursalId, \" no existe\"));\n                }\n            }\n            // Crear usuario en Cognito\n            await _cognitoService__WEBPACK_IMPORTED_MODULE_1__.cognitoService.createUser({\n                email: userData.email,\n                name: userData.name,\n                password: userData.password,\n                roleId: userData.roleId\n            });\n            // Crear usuario en nuestra BD\n            const user = await _server_db_client__WEBPACK_IMPORTED_MODULE_0__[\"default\"].user.create({\n                data: {\n                    email: userData.email,\n                    name: userData.name,\n                    roleId: userData.roleId,\n                    sucursalId: userData.sucursalId || null\n                }\n            });\n            return user;\n        } catch (error) {\n            console.error('Error al crear usuario:', error);\n            throw error;\n        }\n    }\n    // Registrar un nuevo usuario\n    async registerUser(userData) {\n        try {\n            // Registrar en Cognito\n            const cognitoResult = await _cognitoService__WEBPACK_IMPORTED_MODULE_1__.cognitoService.registerUser({\n                email: userData.email,\n                name: userData.name,\n                password: userData.password\n            });\n            if (!cognitoResult.success) {\n                return {\n                    success: false,\n                    message: cognitoResult.message || 'Error al registrar usuario en Cognito',\n                    userId: cognitoResult.userId\n                };\n            }\n            return {\n                success: true,\n                message: cognitoResult.message || 'Usuario registrado exitosamente',\n                userId: cognitoResult.userId\n            };\n        } catch (error) {\n            console.error('Error en registro:', error);\n            return {\n                success: false,\n                message: 'Error al registrar usuario'\n            };\n        }\n    }\n    // Confirmar registro\n    async confirmRegistration(email, code) {\n        try {\n            return await _cognitoService__WEBPACK_IMPORTED_MODULE_1__.cognitoService.confirmRegistration(email, code);\n        } catch (error) {\n            console.error('Error al confirmar registro:', error);\n            return {\n                success: false,\n                message: 'Error al confirmar el registro'\n            };\n        }\n    }\n    // Reenviar código de confirmación\n    async resendConfirmationCode(email) {\n        try {\n            return await _cognitoService__WEBPACK_IMPORTED_MODULE_1__.cognitoService.resendConfirmationCode(email);\n        } catch (error) {\n            console.error('Error al reenviar código:', error);\n            return {\n                success: false,\n                message: 'Error al reenviar el código de verificación'\n            };\n        }\n    }\n}\n// Singleton para uso en la aplicación\nconst authService = new AuthService();\n// Función para el cliente (frontend)\nasync function refreshToken() {\n    const refreshToken = localStorage.getItem('refreshToken');\n    if (!refreshToken) return false;\n    try {\n        const response = await fetch('/api/auth/refresh', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                refreshToken\n            })\n        });\n        if (!response.ok) return false;\n        const data = await response.json();\n        // Actualizar tokens\n        localStorage.setItem('accessToken', data.accessToken);\n        localStorage.setItem('idToken', data.idToken);\n        return true;\n    } catch (error) {\n        console.error('Error al refrescar token:', error);\n        return false;\n    }\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9zZXJ2ZXIvc2VydmljZXMvYXV0aC9hdXRoU2VydmljZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBLDBDQUEwQztBQUVGO0FBQ3dDO0FBRWhGLGdFQUFnRTtBQUN6RCxNQUFNRTtJQUNYLFFBQVE7SUFDUixNQUFNQyxNQUFNQyxXQUE2QixFQUE4QjtRQUNyRSxJQUFJO1lBQ0YseUJBQXlCO1lBQ3pCLE1BQU1DLGdCQUFnQixNQUFNSiwyREFBY0EsQ0FBQ0UsS0FBSyxDQUFDQztZQUVqRCwrQkFBK0I7WUFDL0IsSUFBSUUsT0FBTyxNQUFNTix5REFBTUEsQ0FBQ00sSUFBSSxDQUFDQyxTQUFTLENBQUM7Z0JBQ3JDQyxPQUFPO29CQUNMQyxPQUFPTCxZQUFZSyxLQUFLO2dCQUMxQjtnQkFDQUMsU0FBUztvQkFDUEMsTUFBTTtnQkFDUjtZQUNGO1lBRUlDLFFBQVFDLEdBQUcsQ0FBQyx1QkFBdUJQO1lBQ3pDTSxRQUFRQyxHQUFHLENBQUMsb0JBQW9CUCxpQkFBQUEsMkJBQUFBLEtBQU1LLElBQUk7WUFFeEMsc0NBQXNDO1lBQ3RDLElBQUksQ0FBQ0wsTUFBTTtnQkFDVE0sUUFBUUMsR0FBRyxDQUFDO2dCQUVaLGdEQUFnRDtnQkFDaEQsSUFBSUYsT0FBTyxNQUFNWCx5REFBTUEsQ0FBQ1csSUFBSSxDQUFDSixTQUFTLENBQUM7b0JBQ3JDQyxPQUFPO3dCQUFFTSxNQUFNO29CQUFRO2dCQUN6QjtnQkFFQSwwREFBMEQ7Z0JBQzFELElBQUksQ0FBQ0gsTUFBTTtvQkFDVEMsUUFBUUMsR0FBRyxDQUFDO29CQUNaRixPQUFPLE1BQU1YLHlEQUFNQSxDQUFDVyxJQUFJLENBQUNJLE1BQU0sQ0FBQzt3QkFDOUJDLE1BQU07NEJBQ0pGLE1BQU07NEJBQ05HLGFBQWE7Z0NBQUM7NkJBQUksQ0FBQywrQkFBK0I7d0JBQ3BEO29CQUNGO2dCQUNGO2dCQUVBLGtEQUFrRDtnQkFDbERYLE9BQU8sTUFBTU4seURBQU1BLENBQUNN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UUFFNUMsT0FBTztJQUNULEVBQUUsT0FBT25DLE9BQU87UUFDZFQsUUFBUVMsS0FBSyxDQUFDLDZCQUE2QkE7UUFDM0MsT0FBTztJQUNUO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nYXN0b25tb3JhL0Rlc2t0b3AvUHJveWVjdG9zL1R1bHVtL3NyYy9zZXJ2ZXIvc2VydmljZXMvYXV0aC9hdXRoU2VydmljZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvc2VydmVyL3NlcnZpY2VzL2F1dGgvYXV0aFNlcnZpY2UudHNcbmltcG9ydCB7IFVzZXIgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5pbXBvcnQgcHJpc21hIGZyb20gJ0Avc2VydmVyL2RiL2NsaWVudCc7XG5pbXBvcnQgeyBjb2duaXRvU2VydmljZSwgTG9naW5DcmVkZW50aWFscywgQXV0aFJlc3VsdCB9IGZyb20gJy4vY29nbml0b1NlcnZpY2UnO1xuXG4vLyBTZXJ2aWNpbyBkZSBhdXRlbnRpY2FjacOzbiBxdWUgYWN0w7phIGNvbW8gZmFjaGFkYSBwYXJhIENvZ25pdG9cbmV4cG9ydCBjbGFzcyBBdXRoU2VydmljZSB7XG4gIC8vIExvZ2luXG4gIGFzeW5jIGxvZ2luKGNyZWRlbnRpYWxzOiBMb2dpbkNyZWRlbnRpYWxzKTogUHJvbWlzZTxBdXRoUmVzdWx0IHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBBdXRlbnRpY2FyIGNvbiBDb2duaXRvXG4gICAgICBjb25zdCBjb2duaXRvUmVzdWx0ID0gYXdhaXQgY29nbml0b1NlcnZpY2UubG9naW4oY3JlZGVudGlhbHMpO1xuICAgICAgXG4gICAgICAvLyBCdXNjYXIgdXN1YXJpbyBlbiBudWVzdHJhIEJEXG4gICAgICBsZXQgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRGaXJzdCh7XG4gICAgICAgIHdoZXJlOiB7IFxuICAgICAgICAgIGVtYWlsOiBjcmVkZW50aWFscy5lbWFpbCBcbiAgICAgICAgfSxcbiAgICAgICAgaW5jbHVkZTogeyBcbiAgICAgICAgICByb2xlOiB0cnVlIFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgICAgIGNvbnNvbGUubG9nKCdVc3VhcmlvIGVuY29udHJhZG86JywgdXNlcik7XG4gICAgY29uc29sZS5sb2coJ1JvbCBkZWwgdXN1YXJpbzonLCB1c2VyPy5yb2xlKTtcbiAgICBcbiAgICAgIC8vIFNpIG5vIGV4aXN0ZSBlbCB1c3VhcmlvLCBsbyBjcmVhbW9zXG4gICAgICBpZiAoIXVzZXIpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJVc3VhcmlvIG5vIGVuY29udHJhZG8gZW4gQkQgbG9jYWwsIGNyZWFuZG8uLi5cIik7XG4gICAgICAgIFxuICAgICAgICAvLyBCdXNjYXIgcHJpbWVybyB1biByb2wgKHByZWZlcmlibGVtZW50ZSBhZG1pbilcbiAgICAgICAgbGV0IHJvbGUgPSBhd2FpdCBwcmlzbWEucm9sZS5maW5kRmlyc3Qoe1xuICAgICAgICAgIHdoZXJlOiB7IG5hbWU6ICdhZG1pbicgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNpIG5vIGV4aXN0ZSBuaW5nw7puIHJvbCwgbmVjZXNpdGFtb3MgY3JlYXIgYWwgbWVub3MgdW5vXG4gICAgICAgIGlmICghcm9sZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiQ3JlYW5kbyByb2wgJ2FkbWluJyBwb3JxdWUgbm8gZXhpc3RlXCIpO1xuICAgICAgICAgIHJvbGUgPSBhd2FpdCBwcmlzbWEucm9sZS5jcmVhdGUoe1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICBuYW1lOiAnYWRtaW4nLFxuICAgICAgICAgICAgICBwZXJtaXNzaW9uczogWycqJ10gLy8gVG9kb3MgbG9zIHBlcm1pc29zIGNvbW8gSlNPTlxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBDcmVhciBlbCB1c3VhcmlvIGNvbiBlbCByb2wgZW5jb250cmFkbyBvIGNyZWFkb1xuICAgICAgICB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuY3JlYXRlKHtcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICBpZDogY29nbml0b1Jlc3VsdC51c2VyLmlkLCAvLyBVc2FyIGVsIHN1YiBkZSBDb2duaXRvIGNvbW8gSURcbiAgICAgICAgICAgIGVtYWlsOiBjcmVkZW50aWFscy5lbWFpbCxcbiAgICAgICAgICAgIG5hbWU6IGNvZ25pdG9SZXN1bHQudXNlci5uYW1lIHx8IGNyZWRlbnRpYWxzLmVtYWlsLnNwbGl0KCdAJylbMF0sXG4gICAgICAgICAgICByb2xlSWQ6IHJvbGUuaWQsXG4gICAgICAgICAgICAvLyBObyBpbmNsdWltb3Mgc3VjdXJzYWxJZCB5YSBxdWUgZXMgb3BjaW9uYWwgZW4gdHUgZXNxdWVtYVxuICAgICAgICAgIH0sXG4gICAgICAgICAgaW5jbHVkZTogeyBcbiAgICAgICAgICAgIHJvbGU6IHRydWUgXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnNvbGUubG9nKFwiVXN1YXJpbyBjcmVhZG8gZXhpdG9zYW1lbnRlOlwiLCB1c2VyLmlkKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRGV2b2x2ZW1vcyBlbCByZXN1bHRhZG8gY29tYmluYWRvXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5jb2duaXRvUmVzdWx0LFxuICAgICAgICB1c2VyOiB7XG4gICAgICAgICAgLi4udXNlcixcbiAgICAgICAgICAvLyBBc2VndXJhcnNlIGRlIHF1ZSB1c2Ftb3MgbG9zIGRhdG9zIGRlIG51ZXN0cmEgQkRcbiAgICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgICByb2xlSWQ6IHVzZXIucm9sZUlkXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGVuIGxvZ2luOicsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yOyAvLyBQcm9wYWdhciBlbCBlcnJvciBwYXJhIHF1ZSBlbCBjbGllbnRlIHB1ZWRhIG1hbmVqYXJsb1xuICAgIH1cbiAgfVxuICBcbiAgLy8gQ2VycmFyIHNlc2nDs25cbiAgYXN5bmMgbG9nb3V0KGFjY2Vzc1Rva2VuOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICB0cnkge1xuICAgICAgYXdhaXQgY29nbml0b1NlcnZpY2UubG9nb3V0KGFjY2Vzc1Rva2VuKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBlbiBsb2dvdXQ6JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuICBcbiAgLy8gUmVmcmVzY2FyIHRva2VuXG4gIGFzeW5jIHJlZnJlc2hVc2VyVG9rZW4ocmVmcmVzaFRva2VuOiBzdHJpbmcpOiBQcm9taXNlPE9taXQ8QXV0aFJlc3VsdCwgJ3VzZXInPiB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgLy8gVXNhciBlbCBlbWFpbCBhbG1hY2VuYWRvIGVuIGxvY2FsU3RvcmFnZSBwYXJhIGVsIFNFQ1JFVF9IQVNIXG4gICAgICBsZXQgZW1haWwgPSAnJztcbiAgICAgIGlmICh0eXBlb2YgbG9jYWxTdG9yYWdlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBlbWFpbCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCd1c2VyRW1haWwnKSB8fCAnJztcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIGF3YWl0IGNvZ25pdG9TZXJ2aWNlLnJlZnJlc2hUb2tlbihyZWZyZXNoVG9rZW4sIGVtYWlsKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgcmVmcmVzY2FyIHRva2VuOicsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuICBcbiAgLy8gT2J0ZW5lciB1c3VhcmlvIHBvciBJRFxuICBhc3luYyBnZXRVc2VyQnlJZCh1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8T21pdDxVc2VyLCAncGFzc3dvcmQnPiB8IG51bGw+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IHByaXNtYS51c2VyLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyBpZDogdXNlcklkIH0sXG4gICAgICAgIGluY2x1ZGU6IHsgcm9sZTogdHJ1ZSB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKCF1c2VyKSByZXR1cm4gbnVsbDtcbiAgICAgIFxuICAgICAgcmV0dXJuIHVzZXI7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIG9idGVuZXIgdXN1YXJpbzonLCBlcnJvcik7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cbiAgXG4gIC8vIENyZWFyIHVzdWFyaW8gKGFkbWluKVxuICBhc3luYyBjcmVhdGVVc2VyKHVzZXJEYXRhOiB7XG4gICAgZW1haWw6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgcGFzc3dvcmQ6IHN0cmluZztcbiAgICByb2xlSWQ6IHN0cmluZztcbiAgICBzdWN1cnNhbElkPzogc3RyaW5nO1xuICB9KTogUHJvbWlzZTxVc2VyIHwgbnVsbD4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBWZXJpZmljYXIgcXVlIGVsIHJvbCBleGlzdGVcbiAgICAgIGNvbnN0IHJvbGVFeGlzdHMgPSBhd2FpdCBwcmlzbWEucm9sZS5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJEYXRhLnJvbGVJZCB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKCFyb2xlRXhpc3RzKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRWwgcm9sIGNvbiBJRCAke3VzZXJEYXRhLnJvbGVJZH0gbm8gZXhpc3RlYCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFNpIHNlIHByb3BvcmNpb25hIHN1Y3Vyc2FsSWQsIHZlcmlmaWNhciBxdWUgZXhpc3RlXG4gICAgICBpZiAodXNlckRhdGEuc3VjdXJzYWxJZCkge1xuICAgICAgICBjb25zdCBzdWN1cnNhbEV4aXN0cyA9IGF3YWl0IHByaXNtYS51YmljYWNpb24uZmluZFVuaXF1ZSh7XG4gICAgICAgICAgd2hlcmU6IHsgaWQ6IHVzZXJEYXRhLnN1Y3Vyc2FsSWQgfVxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGlmICghc3VjdXJzYWxFeGlzdHMpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYExhIHViaWNhY2nDs24gY29uIElEICR7dXNlckRhdGEuc3VjdXJzYWxJZH0gbm8gZXhpc3RlYCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ3JlYXIgdXN1YXJpbyBlbiBDb2duaXRvXG4gICAgICBhd2FpdCBjb2duaXRvU2VydmljZS5jcmVhdGVVc2VyKHtcbiAgICAgICAgZW1haWw6IHVzZXJEYXRhLmVtYWlsLFxuICAgICAgICBuYW1lOiB1c2VyRGF0YS5uYW1lLFxuICAgICAgICBwYXNzd29yZDogdXNlckRhdGEucGFzc3dvcmQsXG4gICAgICAgIHJvbGVJZDogdXNlckRhdGEucm9sZUlkXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gQ3JlYXIgdXN1YXJpbyBlbiBudWVzdHJhIEJEXG4gICAgICBjb25zdCB1c2VyID0gYXdhaXQgcHJpc21hLnVzZXIuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGVtYWlsOiB1c2VyRGF0YS5lbWFpbCxcbiAgICAgICAgICBuYW1lOiB1c2VyRGF0YS5uYW1lLFxuICAgICAgICAgIHJvbGVJZDogdXNlckRhdGEucm9sZUlkLFxuICAgICAgICAgIHN1Y3Vyc2FsSWQ6IHVzZXJEYXRhLnN1Y3Vyc2FsSWQgfHwgbnVsbFxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgcmV0dXJuIHVzZXI7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGFsIGNyZWFyIHVzdWFyaW86JywgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuICB9XG5cbiAgLy8gUmVnaXN0cmFyIHVuIG51ZXZvIHVzdWFyaW9cbiAgYXN5bmMgcmVnaXN0ZXJVc2VyKHVzZXJEYXRhOiB7XG4gICAgZW1haWw6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgcGFzc3dvcmQ6IHN0cmluZztcbiAgfSk6IFByb21pc2U8eyBzdWNjZXNzOiBib29sZWFuOyBtZXNzYWdlOiBzdHJpbmc7IHVzZXJJZD86IHN0cmluZyB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIFJlZ2lzdHJhciBlbiBDb2duaXRvXG4gICAgICBjb25zdCBjb2duaXRvUmVzdWx0ID0gYXdhaXQgY29nbml0b1NlcnZpY2UucmVnaXN0ZXJVc2VyKHtcbiAgICAgICAgZW1haWw6IHVzZXJEYXRhLmVtYWlsLFxuICAgICAgICBuYW1lOiB1c2VyRGF0YS5uYW1lLFxuICAgICAgICBwYXNzd29yZDogdXNlckRhdGEucGFzc3dvcmRcbiAgICAgIH0pO1xuICAgICAgaWYgKCFjb2duaXRvUmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBtZXNzYWdlOiBjb2duaXRvUmVzdWx0Lm1lc3NhZ2UgfHwgJ0Vycm9yIGFsIHJlZ2lzdHJhciB1c3VhcmlvIGVuIENvZ25pdG8nLFxuICAgICAgICAgIHVzZXJJZDogY29nbml0b1Jlc3VsdC51c2VySWRcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgbWVzc2FnZTogY29nbml0b1Jlc3VsdC5tZXNzYWdlIHx8ICdVc3VhcmlvIHJlZ2lzdHJhZG8gZXhpdG9zYW1lbnRlJyxcbiAgICAgICAgdXNlcklkOiBjb2duaXRvUmVzdWx0LnVzZXJJZFxuICAgICAgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZW4gcmVnaXN0cm86JywgZXJyb3IpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIG1lc3NhZ2U6ICdFcnJvciBhbCByZWdpc3RyYXIgdXN1YXJpbydcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLy8gQ29uZmlybWFyIHJlZ2lzdHJvXG4gIGFzeW5jIGNvbmZpcm1SZWdpc3RyYXRpb24oZW1haWw6IHN0cmluZywgY29kZTogc3RyaW5nKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluZyB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCBjb2duaXRvU2VydmljZS5jb25maXJtUmVnaXN0cmF0aW9uKGVtYWlsLCBjb2RlKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgY29uZmlybWFyIHJlZ2lzdHJvOicsIGVycm9yKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtZXNzYWdlOiAnRXJyb3IgYWwgY29uZmlybWFyIGVsIHJlZ2lzdHJvJ1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICAvLyBSZWVudmlhciBjw7NkaWdvIGRlIGNvbmZpcm1hY2nDs25cbiAgYXN5bmMgcmVzZW5kQ29uZmlybWF0aW9uQ29kZShlbWFpbDogc3RyaW5nKTogUHJvbWlzZTx7IHN1Y2Nlc3M6IGJvb2xlYW47IG1lc3NhZ2U6IHN0cmluZyB9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCBjb2duaXRvU2VydmljZS5yZXNlbmRDb25maXJtYXRpb25Db2RlKGVtYWlsKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgcmVlbnZpYXIgY8OzZGlnbzonLCBlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbWVzc2FnZTogJ0Vycm9yIGFsIHJlZW52aWFyIGVsIGPDs2RpZ28gZGUgdmVyaWZpY2FjacOzbidcbiAgICAgIH07XG4gICAgfVxuICB9XG59XG5cbi8vIFNpbmdsZXRvbiBwYXJhIHVzbyBlbiBsYSBhcGxpY2FjacOzblxuZXhwb3J0IGNvbnN0IGF1dGhTZXJ2aWNlID0gbmV3IEF1dGhTZXJ2aWNlKCk7XG5cbi8vIEZ1bmNpw7NuIHBhcmEgZWwgY2xpZW50ZSAoZnJvbnRlbmQpXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVmcmVzaFRva2VuKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICBjb25zdCByZWZyZXNoVG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgncmVmcmVzaFRva2VuJyk7XG4gIGlmICghcmVmcmVzaFRva2VuKSByZXR1cm4gZmFsc2U7XG4gIFxuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJy9hcGkvYXV0aC9yZWZyZXNoJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgcmVmcmVzaFRva2VuIH0pXG4gICAgfSk7XG4gICAgXG4gICAgaWYgKCFyZXNwb25zZS5vaykgcmV0dXJuIGZhbHNlO1xuICAgIFxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XG4gICAgXG4gICAgLy8gQWN0dWFsaXphciB0b2tlbnNcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWNjZXNzVG9rZW4nLCBkYXRhLmFjY2Vzc1Rva2VuKTtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnaWRUb2tlbicsIGRhdGEuaWRUb2tlbik7XG4gICAgXG4gICAgcmV0dXJuIHRydWU7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgYWwgcmVmcmVzY2FyIHRva2VuOicsIGVycm9yKTtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn0iXSwibmFtZXMiOlsicHJpc21hIiwiY29nbml0b1NlcnZpY2UiLCJBdXRoU2VydmljZSIsImxvZ2luIiwiY3JlZGVudGlhbHMiLCJjb2duaXRvUmVzdWx0IiwidXNlciIsImZpbmRGaXJzdCIsIndoZXJlIiwiZW1haWwiLCJpbmNsdWRlIiwicm9sZSIsImNvbnNvbGUiLCJsb2ciLCJuYW1lIiwiY3JlYXRlIiwiZGF0YSIsInBlcm1pc3Npb25zIiwiaWQiLCJzcGxpdCIsInJvbGVJZCIsImVycm9yIiwibG9nb3V0IiwiYWNjZXNzVG9rZW4iLCJyZWZyZXNoVXNlclRva2VuIiwicmVmcmVzaFRva2VuIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsImdldFVzZXJCeUlkIiwidXNlcklkIiwiZmluZFVuaXF1ZSIsImNyZWF0ZVVzZXIiLCJ1c2VyRGF0YSIsInJvbGVFeGlzdHMiLCJFcnJvciIsInN1Y3Vyc2FsSWQiLCJzdWN1cnNhbEV4aXN0cyIsInViaWNhY2lvbiIsInBhc3N3b3JkIiwicmVnaXN0ZXJVc2VyIiwic3VjY2VzcyIsIm1lc3NhZ2UiLCJjb25maXJtUmVnaXN0cmF0aW9uIiwiY29kZSIsInJlc2VuZENvbmZpcm1hdGlvbkNvZGUiLCJhdXRoU2VydmljZSIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJvayIsImpzb24iLCJzZXRJdGVtIiwiaWRUb2tlbiJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/server/services/auth/authService.ts\n"));

/***/ })

});